<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Document Upload</title>
    <style>
        .upload-container {
            display: flex;
            gap: 20px;
        }

        .upload-section {
            flex: 1;
        }

        .preview-section {
            flex: 1;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
        }

         select,
        input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 16px;
        }

        select { 
            appearance: none;
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px 12px;
        }

        .upload-box {
            border: 1px dashed #ced4da;
            border-radius: 4px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 16px;
            position: relative;
            cursor: pointer;
        }

        .upload-box:hover {
            background-color: #f8f9fa;
        }

        .upload-icon {
            width: 40px;
            height: 40px;
            margin-bottom: 10px;
            fill: #6c757d;
        }

        .upload-text {
            color: #0d6efd;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .upload-subtext {
            color: #6c757d;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .file-types {
            color: #6c757d;
            font-size: 12px;
        }

        .preview-box {
            background-color: #f1f3f5;
            border-radius: 4px;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #adb5bd;
            margin-bottom: 16px;
        }

        .preview-image {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }

        .preview-pdf {
            width: 100%;
            height: 100%;
            display: none;
        }

        input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        
        .calendar-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>Document Upload</h2>
        <div class="row">
            <div class="col-md-6">
                <label for="documentType">Document Type</label>
                <select class="form-control" id="document_type" required="required" name="document_type"
                    fdprocessedid="4ek3g">
                    <option selected="selected" value="">Select Document Type</option>
                    <option value="passport">Passport</option>
                    <option value="evisa">eVisa</option>
                    <option value="ni_number">NI number</option>
                    <option value="share_code">Share code</option>
                    <option value="share_code_verification">Share code verification</option>
                    <option value="ecs_report">ECS report</option>
                    <option value="application">Application</option>
                    <option value="arc_card">ARC card</option>
                    <option value="cas">CAS</option>
                    <option value="cos ">CoS </option>
                    <option value="university_letter">University letter</option>
                    <option value="dbs">DBS</option>
                </select>

                <div class="upload-box" id="uploadBox">
                    <input type="file" id="fileInput" accept=".pdf,.png,.jpg,.jpeg">
                    <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M11 15h2V9h3l-4-5-4 5h3z" />
                        <path d="M20 18H4v-7H2v7c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-7h-2v7z" />
                    </svg>
                    <div class="upload-text">Upload a file</div>
                    <div class="upload-subtext">or drag and drop</div>
                    <div class="file-types">PDF, PNG, JPG up to 10MB</div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="preview-section">
                    <label>Document Preview</label>
                    <div class="preview-box" id="previewBox">
                        <span id="previewText">No document selected</span>
                        <img id="previewImage" class="preview-image">
                        <embed id="previewPdf" class="preview-pdf" type="application/pdf">
                    </div>

                </div>
            </div>
            <div class="col-md-6">
                <label for="startDate">Document Start Date</label>
                <div class="date-input">
                    <input type="date" id="startDate" placeholder="dd/mm/yyyy">

                </div>
            </div>


            <div class="col-md-6">
                <label for="expiryDate">Document Expiry Date</label>
                <div class="date-input">
                    <input type="date" id="expiryDate" placeholder="dd/mm/yyyy">

                </div>

            </div>
        </div>
        <div class="upload-container">
            <div class="upload-section">
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const fileInput = document.getElementById('fileInput');
            const previewBox = document.getElementById('previewBox');
            const previewText = document.getElementById('previewText');
            const previewImage = document.getElementById('previewImage');
            const previewPdf = document.getElementById('previewPdf');
            const uploadBox = document.getElementById('uploadBox');
            const expiryDateInput = document.getElementById('expiryDate');

            // Handle file selection
            fileInput.addEventListener('change', function (e) {
                const file = e.target.files[0];

                if (!file) {
                    resetPreview();
                    return;
                }


                // Check file size (10MB max)
                const maxSize = 10 * 1024 * 1024; // 10MB in bytes
                if (file.size > maxSize) {
                    alert('File is too large. Maximum size is 10MB.');
                    resetPreview();
                    return;
                }

                // Check file type
                const validTypes = ['application/pdf', 'image/png', 'image/jpeg', 'image/jpg'];
                if (!validTypes.includes(file.type)) {
                    alert('Invalid file type. Please upload PDF, PNG, or JPG files only.');
                    resetPreview();
                    return;
                }

                // Update preview based on file type
                previewText.style.display = 'none';

                if (file.type === 'application/pdf') {
                    previewImage.style.display = 'none';
                    previewPdf.style.display = 'block';

                    // Create object URL for the PDF
                    const objectUrl = URL.createObjectURL(file);
                    previewPdf.src = objectUrl;
                } else {
                    // It's an image
                    previewPdf.style.display = 'none';
                    previewImage.style.display = 'block';

                    // Create object URL for the image
                    const objectUrl = URL.createObjectURL(file);
                    previewImage.src = objectUrl;
                }
            });

            // Handle drag and drop
            uploadBox.addEventListener('dragover', function (e) {
                e.preventDefault();
                uploadBox.style.backgroundColor = '#f1f3f5';
            });

            uploadBox.addEventListener('dragleave', function () {
                uploadBox.style.backgroundColor = '';
            });

            uploadBox.addEventListener('drop', function (e) {
                e.preventDefault();
                uploadBox.style.backgroundColor = '';

                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    // Trigger change event manually
                    const event = new Event('change');
                    fileInput.dispatchEvent(event);
                }
            });

            function resetPreview() {
                previewText.style.display = 'block';
                previewText.textContent = 'No document selected';
                previewImage.style.display = 'none';
                previewPdf.style.display = 'none';
                fileInput.value = '';
            }
        });
    </script>
</body>

</html>